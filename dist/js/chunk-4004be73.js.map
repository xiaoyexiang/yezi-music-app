{"version":3,"sources":["webpack:///./src/views/playlistDetail/playlistDetail.vue?96e6","webpack:///src/views/playlistDetail/playlistDetail.vue","webpack:///./src/views/playlistDetail/playlistDetail.vue?e2df","webpack:///./src/views/playlistDetail/playlistDetail.vue","webpack:///./src/common/js/util.js","webpack:///./src/views/playlistDetail/playlistDetail.vue?6a8c"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","data","playlist","tracks","style","directives","name","rawName","value","expression","_v","_s","handleCount","playCount","src","creator","avatarUrl","nickname","_l","song","index","data-song-id","id","on","click","$event","preventDefault","stopPropagation","goPlay","domProps","innerHTML","staticRenderFns","playlistDetailvue_type_script_lang_js_","computed","bgStyle","concat","bgImageUrl","playlistId","methods","goBack","$router","back","getPlaylistDetail","_this","Object","api","then","res","code","coverImgUrl","console","log","_this2","songUrl","url","$store","commit","num","util","created","$route","params","playlistDetail_playlistDetailvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","str","String","length","replace","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_playlistDetail_vue_vue_type_style_index_0_id_5f522623_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_playlistDetail_vue_vue_type_style_index_0_id_5f522623_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-4004be73.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"list-container\"},[_c('cube-scroll',{ref:\"scroll\",attrs:{\"data\":_vm.playlist.tracks}},[_c('section',{staticClass:\"pylist-header\"},[_c('div',{staticClass:\"bg-image\",style:(_vm.bgStyle)}),_c('div',{staticClass:\"plhead_wrap\"},[_c('div',{staticClass:\"plhead_fl\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(_vm.bgImageUrl),expression:\"bgImageUrl\"}],staticClass:\"u-img\"}),_c('span',{staticClass:\"lsthd_icon\"},[_vm._v(\"歌单\")]),_c('span',{staticClass:\"lsthd_num\"},[_c('i',{staticClass:\"icon iconfont icon-erjieps\"}),_vm._v(\" \"+_vm._s(_vm.handleCount(_vm.playlist && _vm.playlist.playCount))+\"\\n                    \")])]),_c('div',{staticClass:\"plhead_fr\"},[_c('h2',{staticClass:\"lsthd_title\"},[_vm._v(_vm._s(_vm.playlist.name))]),_c('div',{staticClass:\"lsthd_auth\"},[_c('div',{staticClass:\"u-avatar lsthd_ava\"},[_c('img',{staticClass:\"u-img\",attrs:{\"src\":_vm.playlist && _vm.playlist.creator.avatarUrl}})]),_c('span',{staticClass:\"nickname\"},[_vm._v(_vm._s(_vm.playlist && _vm.playlist.creator.nickname))])])])])]),_c('ul',[_vm._l((_vm.playlist.tracks),function(song,index){return [_c('li',{staticClass:\"songlist\",attrs:{\"data-song-id\":song.id},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.goPlay(song.id)}}},[_c('p',{domProps:{\"innerHTML\":_vm._s(song.name)}})])]})],2)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"list-container\">\n        <cube-scroll\n                ref=\"scroll\"\n                :data=\"playlist.tracks\">\n            <section class=\"pylist-header\">\n                <div class=\"bg-image\" :style=\"bgStyle\"></div>\n                <div class=\"plhead_wrap\">\n                    <div class=\"plhead_fl\">\n                        <img class=\"u-img\" v-lazy=\"bgImageUrl\">\n                        <span class=\"lsthd_icon\">歌单</span>\n                        <span class=\"lsthd_num\">\n                            <i class=\"icon iconfont icon-erjieps\"></i> {{handleCount(playlist && playlist.playCount)}}\n                        </span>\n                    </div>\n                    <div class=\"plhead_fr\">\n                        <h2 class=\"lsthd_title\">{{playlist.name}}</h2>\n                        <div class=\"lsthd_auth\">\n                            <div class=\"u-avatar lsthd_ava\">\n                                <img class=\"u-img\" :src=\"playlist && playlist.creator.avatarUrl\">\n                            </div>\n                            <span class=\"nickname\">{{playlist && playlist.creator.nickname}}</span>\n\n                        </div>\n                    </div>\n                </div>\n            </section>\n            <ul>\n                <template v-for=\"(song, index) in playlist.tracks\">\n                    <li class=\"songlist\" :data-song-id=\"song.id\" @click.prevent.stop=\"goPlay(song.id)\">\n                        <p v-html=\"song.name\"></p>\n                    </li>\n                </template>\n            </ul>\n        </cube-scroll>\n\n    </div>\n</template>\n<script>\n  import {requestPlaylistDetail, requestSongUrl} from '@/api/api.js';\n  import {mapMutations} from 'vuex';\n  import * as util from '@/common/js/util';\n\n  export default {\n    computed: {\n      bgStyle() {\n        return `background-image:url(${this.bgImageUrl})`\n      }\n    },\n    data() {\n      return {\n        playlistId: -1,\n        playlist: {\n          tracks: [],\n          creator: {},\n        },\n        bgImageUrl: '',\n      };\n    },\n    methods: {\n      goBack() {\n        this.$router.back();\n      },\n      getPlaylistDetail() {\n        requestPlaylistDetail(this.playlistId).then((res) => {\n          if (res && +res.code === 200) {\n            this.playlist = res.playlist;\n            this.bgImageUrl = this.playlist.coverImgUrl;\n          }\n        }).then(() => {\n          console.log(this.playlist);\n        })\n      },\n      goPlay(id) {\n        requestSongUrl(id).then((res) => {\n          console.log(res);\n          let songUrl = res.data[0].url;\n          this.$store.commit('updateCurrentSongUrl', songUrl);\n        })\n      },\n      handleCount(num) {\n        return util.handleCount(num);\n      },\n    },\n    created() {\n      if (!this.playlistId) {\n        this.goBack();\n      }\n      this.playlistId = this.$route.params.id;\n      // this.playlistId = 19723756;\n      console.log(this.playlistId);\n      this.getPlaylistDetail();\n    },\n  };\n</script>\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"stylus\" scoped>\n    .list-container {\n        position: fixed\n        top: 0\n        left: 0\n        right: 0\n        bottom: 0\n        z-index: 10\n        margin: auto\n        background-color: #fff\n        overflow: hidden\n    }\n\n    .pylist-header {\n        position: relative;\n        padding: 30px 10px 30px 15px;\n        overflow: hidden;\n        .bg-image {\n            position: absolute\n            left: 0\n            right: 0\n            top: 0\n            bottom: 0\n            z-index: 1\n            margin: auto\n            background-repeat: no-repeat;\n            background-size: cover;\n            background-position: 50%;\n            filter: blur(20px);\n            transform: scale(1.5);\n            &::after {\n                content: ''\n                position: absolute\n                left: 0\n                right: 0\n                top: 0\n                bottom: 0\n                z-index: 1\n                margin: auto\n                background-color: rgba(0, 0, 0, .25)\n            }\n        }\n        .plhead_wrap {\n            display: flex\n            position: relative\n            z-index: 2\n            .plhead_fl {\n                position: relative\n                width: 114px\n                height: 114px\n                background-color: #e2e2e3\n                &::after {\n                    content: \" \";\n                    position: absolute;\n                    left: 0;\n                    top: 0;\n                    width: 100%;\n                    height: 18px;\n                    z-index: 2;\n                    background-image: linear-gradient(90deg, transparent, rgba(0, 0, 0, .2));\n                }\n                .lsthd_icon {\n                    position: absolute;\n                    z-index: 3;\n                    top: 10px;\n                    left: 0;\n                    padding: 0 8px;\n                    height: 17px;\n                    color: #fff;\n                    font-size: 9px;\n                    text-align: center;\n                    line-height: 17px;\n                    background-color: rgba(217, 48, 48, .8);\n                    border-top-right-radius: 17px;\n                    border-bottom-right-radius: 17px;\n                }\n                .u-img {\n                    display: block\n                    width: 100%\n                }\n                .lsthd_num {\n                    position: absolute;\n                    right: 2px;\n                    top: 0;\n                    z-index: 3;\n                    color: #fff;\n                    font-size: 12px;\n                    text-shadow: 1px 0 0 rgba(0, 0, 0, .15);\n                }\n            }\n            .plhead_fr {\n                margin-left: 15px\n                flex: 1 1 auto\n                overflow: hidden\n                width: 1%\n                .u-avatar {\n                    display: inline-block;\n                    width: 30px;\n                    height: 30px;\n                    border-radius: 50%;\n                    vertical-align: middle;\n                    margin-right: 5px;\n                    .u-img {\n                        width: 100%\n                        border-radius: 50%;\n                    }\n                }\n                .nickname {\n                    color: hsla(0,0%,100%,.7);\n                }\n            }\n        }\n        .lsthd_title {\n            padding-top: 1px;\n            font-size: 17px;\n            line-height: 1.3;\n            color: #fefefe;\n            height: 44px;\n            display: -webkit-box;\n            -webkit-box-pack: center;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            -webkit-line-clamp: 2;\n            -webkit-box-orient: vertical;\n        }\n        .lsthd_auth {\n            display: block;\n            position: relative;\n            margin-top: 20px;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            word-break: normal;\n        }\n    }\n\n    .songlist {\n        display: block\n        padding: 0 10px\n        height: 40px;\n        line-height: 40px\n    }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--16-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./playlistDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--16-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./playlistDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./playlistDetail.vue?vue&type=template&id=5f522623&scoped=true&\"\nimport script from \"./playlistDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./playlistDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./playlistDetail.vue?vue&type=style&index=0&id=5f522623&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5f522623\",\n  null\n  \n)\n\nexport default component.exports","function getRandomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min)\n}\n\nexport function shuffle(arr) {\n  let _arr = arr.slice()\n  for (let i = 0; i < _arr.length; i++) {\n    let j = getRandomInt(0, i)\n    let t = _arr[i]\n    _arr[i] = _arr[j]\n    _arr[j] = t\n  }\n  return _arr\n}\n\nexport function debounce(func, delay) {\n  let timer\n\n  return function (...args) {\n    if (timer) {\n      clearTimeout(timer)\n    }\n    timer = setTimeout(() => {\n      func.apply(this, args)\n    }, delay)\n  }\n}\n\n/**\n * 字符串后四位转化为万\n * @param {String} num\n * @return {String}\n */\nexport const handleCount = (num) => {\n  if (num) {\n    const str = String(num);\n    if (str.length > 5) {\n      return str.replace(/\\d{4}$/, '万');\n    }\n    return str;\n  }\n  return '';\n};\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./playlistDetail.vue?vue&type=style&index=0&id=5f522623&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./playlistDetail.vue?vue&type=style&index=0&id=5f522623&lang=stylus&scoped=true&\""],"sourceRoot":""}